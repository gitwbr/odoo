<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<data>
		<record id="view_partner_tree_supp" model="ir.ui.view">
			<field name="name">res.partner.tree.supp</field>
			<field name="model">res.partner</field>
			<field name="arch" type="xml">
				<tree string="Contacts" sample="1" multi_edit="1" default_order="custom_id">
					<field name="display_name" string="名稱"/>
					<field name="function" invisible="1"/>
					<field name="parent_id" invisible="1" readonly="1"/>
					<field name="custom_init_name"/>
					<field name="custom_id"/>
					<field name="phone"/>
				</tree>
			</field>
		</record>

		<record id="view_partner_form_inherit" model="ir.ui.view">
			<field name="name">res.partner.form.inherit</field>
			<field name="model">res.partner</field>
			<field name="inherit_id" ref="base.view_partner_form"/>
			<field name="arch" type="xml">
				<xpath expr="//div[@name='button_box']/button[1]" position="before">
					<button class="oe_stat_button" type="action" 
							name="%(dtsc.action_partner_quotation)d"
							icon="fa-file-text-o"
							attrs="{'invisible': [('supplier_rank','=', 0)]}">
						<field name="quotation_count" widget="statinfo" string="報價"/>
					</button>
				</xpath>
				<field name="vat" position="after">
					<field name="supplier_rank" invisible="1"/>
					<field name="quotation_count" invisible="1"/>
				</field>
			</field>
		</record>

		<record id="action_partner_quotation" model="ir.actions.act_window">
			<field name="name">供應商報價</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">product.supplierinfo</field>
			<field name="view_mode">tree,form</field>
			<field name="view_id" ref="dtsc.supplierinfo_tree"/>
			<field name="domain">[('partner_id', '=', active_id)]</field>
			<field name="context">{'default_partner_id': active_id}</field>
		</record>
	</data>
</odoo>